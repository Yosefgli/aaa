<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>חיפוש כתובת עם Google Maps</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBgw0ZTPktGvbh9ptrbsneIXJaOHF8HTfQ&libraries=places"></script>
    <script>
        const polygons = [
  [
    {
      "lat": 7.914811843686066,
      "lng": 98.2859729460488
    },
    {
      "lat": 7.9192537519531,
      "lng": 98.28664034738492
    },
    {
      "lat": 7.920739897816898,
      "lng": 98.29053543251648
    },
    {
      "lat": 7.9197410075637,
      "lng": 98.29329274338379
    },
    {
      "lat": 7.918822556820308,
      "lng": 98.29507630629818
    },
    {
      "lat": 7.91867378539252,
      "lng": 98.2981232957391
    },
    {
      "lat": 7.91692040380265,
      "lng": 98.29887431426327
    },
    {
      "lat": 7.9164214997145015,
      "lng": 98.30103873750103
    },
    {
      "lat": 7.914689361811028,
      "lng": 98.30204724809063
    },
    {
      "lat": 7.913378986741509,
      "lng": 98.30063104173077
    },
    {
      "lat": 7.910507499410224,
      "lng": 98.30020265448289
    },
    {
      "lat": 7.908924111657964,
      "lng": 98.3039684759398
    },
    {
      "lat": 7.911261997475524,
      "lng": 98.306886719348
    },
    {
      "lat": 7.911240744027789,
      "lng": 98.31037359106736
    },
    {
      "lat": 7.906774787439562,
      "lng": 98.31535218766066
    },
    {
      "lat": 7.903870642716721,
      "lng": 98.3155584907203
    },
    {
      "lat": 7.90353058132851,
      "lng": 98.31600910183481
    },
    {
      "lat": 7.902744188295112,
      "lng": 98.31612711903146
    },
    {
      "lat": 7.901546403930035,
      "lng": 98.31587162726808
    },
    {
      "lat": 7.899203200658455,
      "lng": 98.31244912856508
    },
    {
      "lat": 7.896012410063165,
      "lng": 98.3120073287983
    },
    {
      "lat": 7.896373731857619,
      "lng": 98.31117047958566
    },
    {
      "lat": 7.896214325222565,
      "lng": 98.31051602058602
    },
    {
      "lat": 7.8962887149932435,
      "lng": 98.31014051132394
    },
    {
      "lat": 7.894962623022758,
      "lng": 98.3090580592847
    },
    {
      "lat": 7.89513265727981,
      "lng": 98.30873619420291
    },
    {
      "lat": 7.894006179023073,
      "lng": 98.30765258176089
    },
    {
      "lat": 7.892837188906032,
      "lng": 98.30719124181033
    },
    {
      "lat": 7.8927627985139495,
      "lng": 98.30651532513858
    },
    {
      "lat": 7.8890762311224005,
      "lng": 98.30570413700056
    },
    {
      "lat": 7.884129947692165,
      "lng": 98.30390715788721
    },
    {
      "lat": 7.879448902891155,
      "lng": 98.30039680587097
    },
    {
      "lat": 7.876009131343348,
      "lng": 98.30083413709661
    },
    {
      "lat": 7.87577532341369,
      "lng": 98.30038352598211
    },
    {
      "lat": 7.874446866762591,
      "lng": 98.29961104978582
    },
    {
      "lat": 7.874517103692639,
      "lng": 98.29786615049817
    },
    {
      "lat": 7.876897694584163,
      "lng": 98.29585985815503
    },
    {
      "lat": 7.876642631928835,
      "lng": 98.29271630918957
    },
    {
      "lat": 7.8740388583364265,
      "lng": 98.29173998510815
    },
    {
      "lat": 7.86920454229306,
      "lng": 98.28866080915905
    },
    {
      "lat": 7.87090848647184,
      "lng": 98.2845071157681
    },
    {
      "lat": 7.879977084031989,
      "lng": 98.28696726649494
    },
    {
      "lat": 7.882658193000811,
      "lng": 98.28620207388978
    },
    {
      "lat": 7.885046080206194,
      "lng": 98.28673851569276
    },
    {
      "lat": 7.884620984061663,
      "lng": 98.28597676833253
    },
    {
      "lat": 7.884780395167051,
      "lng": 98.2851077326117
    },
    {
      "lat": 7.88506733500195,
      "lng": 98.28432452757936
    },
    {
      "lat": 7.885056707604218,
      "lng": 98.28344476302247
    },
    {
      "lat": 7.886002544934279,
      "lng": 98.283358932334
    },
    {
      "lat": 7.88636117996668,
      "lng": 98.28269644343861
    },
    {
      "lat": 7.887689598379306,
      "lng": 98.283307987094
    },
    {
      "lat": 7.8887948392466605,
      "lng": 98.28646226489552
    },
    {
      "lat": 7.888429995985052,
      "lng": 98.28902125675981
    },
    {
      "lat": 7.895536348520004,
      "lng": 98.29275821285319
    },
    {
      "lat": 7.902210131296429,
      "lng": 98.29438899593424
    },
    {
      "lat": 7.908203691383772,
      "lng": 98.29421733455729
    },
    {
      "lat": 7.912326870103,
      "lng": 98.28928206996989
    }
  ],
  [
    {
      "lat": 7.895586253099057,
      "lng": 98.3179768899873
    },
    {
      "lat": 7.893715874476386,
      "lng": 98.33788960971387
    },
    {
      "lat": 7.869740272174729,
      "lng": 98.33462804355176
    },
    {
      "lat": 7.873991366755331,
      "lng": 98.31076711215528
    },
    {
      "lat": 7.896776489632149,
      "lng": 98.31814855136426
    }
  ],
  [
    {
      "lat": 7.91482776261958,
      "lng": 98.28589419092438
    },
    {
      "lat": 7.92153281667154,
      "lng": 98.27156106358477
    },
    {
      "lat": 7.932033236317109,
      "lng": 98.26955551113394
    },
    {
      "lat": 7.935483822137335,
      "lng": 98.27446344050901
    },
    {
      "lat": 7.935207543487046,
      "lng": 98.28115823421018
    },
    {
      "lat": 7.934527472172199,
      "lng": 98.28538539561765
    },
    {
      "lat": 7.933291656023016,
      "lng": 98.29747359193243
    },
    {
      "lat": 7.926919069896056,
      "lng": 98.30947437934392
    },
    {
      "lat": 7.92524261531804,
      "lng": 98.31760372823877
    },
    {
      "lat": 7.922883555983786,
      "lng": 98.31878390020532
    },
    {
      "lat": 7.9115257433759485,
      "lng": 98.31827100190776
    },
    {
      "lat": 7.90680745412737,
      "lng": 98.31535275849956
    },
    {
      "lat": 7.911270702094011,
      "lng": 98.31033166322368
    },
    {
      "lat": 7.911270702094011,
      "lng": 98.30685552034038
    },
    {
      "lat": 7.908932816325813,
      "lng": 98.3039587346043
    },
    {
      "lat": 7.910505577301696,
      "lng": 98.3001607266392
    },
    {
      "lat": 7.91339604128922,
      "lng": 98.30058988008159
    },
    {
      "lat": 7.914671239546516,
      "lng": 98.30202754411357
    },
    {
      "lat": 7.916424818210514,
      "lng": 98.30105369715871
    },
    {
      "lat": 7.9169136410828544,
      "lng": 98.2989079299468
    },
    {
      "lat": 7.918677649234008,
      "lng": 98.2981354537505
    },
    {
      "lat": 7.918788058611308,
      "lng": 98.29508445962935
    },
    {
      "lat": 7.919744445158471,
      "lng": 98.29330347284346
    },
    {
      "lat": 7.920743335403335,
      "lng": 98.29055689081221
    },
    {
      "lat": 7.919255625645153,
      "lng": 98.28663013681441
    }
  ]
];
        
        function isPointInPolygon(point, polygon) {
            let x = point.lat, y = point.lng;
            let inside = false;
            for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {
                let xi = polygon[i].lat, yi = polygon[i].lng;
                let xj = polygon[j].lat, yj = polygon[j].lng;
                let intersect = ((yi > y) !== (yj > y)) &&
                                (x < (xj - xi) * (y - yi) / (yj - yi) + xi);
                if (intersect) inside = !inside;
            }
            return inside;
        }
        
        function getPrice(location) {
            if (isPointInPolygon(location, polygons[0])) return 200;
            if (isPointInPolygon(location, polygons[1])) return 300;
            return "אין מחיר זמין למיקום זה";
        }
        
        function initAutocomplete() {
            var input = document.getElementById('address');
            var autocomplete = new google.maps.places.Autocomplete(input);
            var map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: 32.0853, lng: 34.7818 }, // תל אביב כברירת מחדל
                zoom: 13
            });
            var marker = new google.maps.Marker({ map: map });
            
            autocomplete.addListener('place_changed', function() {
                var place = autocomplete.getPlace();
                if (!place.geometry) return;
                
                var location = { lat: place.geometry.location.lat(), lng: place.geometry.location.lng() };
                var price = getPrice(location);
                
                map.setCenter(place.geometry.location);
                map.setZoom(15);
                marker.setPosition(place.geometry.location);
                document.getElementById('price').innerText = "מחיר: " + price;
            });
        }
        
        google.maps.event.addDomListener(window, 'load', initAutocomplete);
    </script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        #map { height: 400px; width: 100%; margin-top: 20px; }
        input { width: 80%; padding: 10px; font-size: 16px; }
        #price { margin-top: 20px; font-size: 18px; font-weight: bold; }
    </style>
</head>
<body>
    <h2>חיפוש כתובת</h2>
    <input id="address" type="text" placeholder="הכנס כתובת...">
    <div id="map"></div>
    <div id="price">מחיר: </div>
</body>
</html>
